# AcademyCraft 标准文档
## 代码结构和惯例说明

Author: WeAthFolD


包结构
===

根包： ```cn.academy```
通用包格式： ```cn.academy.<模块包>.[功能包1].[功能包2]. ...```

在根包下的一级包（模块包）列表如下（在1.0应该不会再增加）：

主要：

* __core__
	Mod主类和一些核心机制。这个模块中不存放任何的实现，只存放：
		
		* 通用模板类(e.g. ```ACBlock```, ```ACItem```, ```ACCommand```)
		* 通用Utils（e.g. ```Resources```, ```RayRenderer```，```ACSounds```）
		* 通用Helper（e.g. ```PlayerData```，```DataPart```）
		* 总之是通用的、内容无关的

* __energy__
	能源系统子模块。这里面存放的是所有和虚通量能源系统有关的实现。无线网事件、能源矩阵、节点、能源物品等都在这里。

* __knowledge__
	知识系统子模块。知识系统和相关UI在这里实现。

* __terminal__
	数据终端子模块。在这里可以找到数据终端的UI和添加新App的方法。

* __ability__
	能力系统子模块。这里是支撑整个能力系统的基础框架。能力开发机、主界面的能力UI、操作控制系统等都在这个包中。

* __vanilla__
	能力系实现模块。预计会有电气使、原子崩坏、空间移动、矢量操纵。每一个系单独开一个包。(e.g.```vanilla.electromaster```)

次要：

* __crafting__
	合成模块。和生存模式合成相关的内容都在这里。有一些合成的机器（e.g. 蚀刻机），合成表，以及**仅作**合成用的物品和方块。
* __misc__
	杂项模块，包含彩蛋内容。
* __support__
	第三方支持模块。将会在这里做能源的通用适配以及NEI支持等等。
* __test__
	测试模块。未定的和待定的新功能都暂时放到这里，以待迁移或者删除。

在每个模块包之下，按照功能类别对Class进行分类。例如： ```block```, ```tile```, ```client.render```。

类组织原则
===

在每个模块包内，应该存在一个名为ModuleXXX的主类。在这个主类中使用AR的```@RegInit```注解完成必要的初始化工作。

不过，在AC中提倡使用分散实现和注册的方法。应该有效的利用AR提供的功能实现子系统的分别注册，而非在一个统一的类中加载。
Item和Block是个例外。它们由于经常被全局访问，应该在每个模块主类中被注册。其他一些需要提供全局访问的实例，也应该在每个模块主类中被注册。

代码原则
===

* 暴露的接口处提供充分的注释和说明
* 将接口和实现明确分开
* 高度模块化和分别注册
* 善用事件系统进行去耦
* 纯装饰物品和方块尽量使用JsonLoader进行加载

惯例
===

* 尽量使用core包提供的包装和抽象，少造轮子，造轮子之前检查有没有重复
* 客户端的很多渲染和声音相关资源可以从```Resource```类获取。
* Item的基类是```ACItem```
* Block的基类是```ACBlock```和```ACBlockContainer```
* Command的基类是```ACCommand```
* 带物品栏的方块```TileEntity```基类是```TileInventory```

分支规则
===

目前可以无脑推送到```master```。在接下来应该会引入更严谨的git协作组织规则。

其它文档
===

每一个模块会在同目录下提供一个单独的md文档，来索引它所具有的基本功能，以及提供该模块的阅读/使用/开发思路和基本用法。

文档索引：

* 补完中……
